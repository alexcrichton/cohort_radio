<div class="song">
	<div class='image'>
		<%= image_tag song.album_image_url if song.album_image_url %>
	</div>
	<div class='content'>
		<h3><%= song.title %></h3>
		<h5>
			<%= song.artist %> 
			<%= raw "&mdash; #{song.album}" unless song.album.blank? %>
		</h5>
		<p>
			Play count: <%= song.play_count %>
		</p>
	</div>
	<div class='links'>
		<p>
			<% if defined?(item) %>
				<p>
					Queued by: <%= item.user.name if item.user %>
				</p>
			<% end %>
			<%= link_to '[download]', download_song_path(song) %>
			<% if can? :manage, song %>
				<%= link_to '[destroy]', song, :method => :delete, :confirm => 'are you sure?' %>
			<% end %>
			<% if defined?(item) && can?(:manage, @playlist) %>
				<br/><%= link_to '[remove]', dequeue_playlist_path(@playlist) + "?" + {:queue_item_id => item.id}.to_query, :class => 'remove' %>
			<% end %>
		</p>
		<% if @playlist.nil? %>
			<div class='add'>
				<%= link_to "[add to playlist]", '#' %>
				<ul>
					<% Playlist.all.each do |playlist| %>
						<li>
							<%= link_to playlist.name, enqueue_playlist_path(playlist) + '?' + {:song_id => song.id}.to_query %>
						</li>
					<% end %>
				</ul>
			</div>
		<% end %>
	</div>
</div>